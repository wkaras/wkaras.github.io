<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title>Walt Karas's Home Page</title>
	<meta name="generator" content="LibreOffice 25.2.6.2 (Linux)"/>
	<meta name="created" content="00:00:00"/>
	<meta name="changed" content="2025-10-06T17:40:16.302416082"/>
	<meta name="Originator" content="Microsoft Word 10"/>
	<meta name="ProgId" content="Word.Document"/>
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<meta name="created" content="00:00:00">
	<style type="text/css">
		@page { size: 8.5in 11in; margin-left: 0.79in; margin-right: 0.39in; margin-top: 0.39in; margin-bottom: 0.39in }
		p { background: transparent; margin-bottom: 0.1in; line-height: 115%; color: #000000; background: transparent }
		h1 { color: #000000; margin-bottom: 0.08in; background: transparent; background: transparent; page-break-after: avoid }
		h1.western { font-weight: bold; font-size: 18pt; font-family: "Liberation Sans", sans-serif }
		h1.cjk { font-weight: bold; font-size: 18pt; font-family: "Noto Sans CJK SC" }
		h1.ctl { font-weight: bold; font-family: "Lohit Devanagari"; font-size: 18pt }
		h2 { color: #000000; margin-top: 0.2in; margin-bottom: 0.08in; background: transparent; background: transparent; page-break-after: avoid }
		h2.western { font-weight: bold; font-size: 16pt; font-family: "Liberation Sans", sans-serif }
		h2.cjk { font-weight: bold; font-size: 16pt; font-family: "Noto Sans CJK SC" }
		h2.ctl { font-weight: bold; font-family: "Lohit Devanagari"; font-size: 16pt }
		a:link { so-language: zxx; color: #0000ff; text-decoration: underline }
		a:visited { so-language: zxx; color: #800080; text-decoration: underline }
	</style>
</head>
<body lang="en-US" text="#000000" link="#0000ff" vlink="#800080" bgcolor="#ffffff" dir="ltr"><p align="center" style="line-height: 100%; margin-top: 0.17in; margin-bottom: 0.08in; background: transparent; page-break-after: avoid">
<font face="Liberation Sans, sans-serif"><font size="6" style="font-size: 28pt"><b>Walt
Karas's Home Page</b></font></font></p>
<p align="center"><font face="Liberation Serif, serif">Last update:
October 6, 2025</font></p>
<p><br/>
<br/>

</p>
<p><a name="_x0000_i1025"></a><font face="Liberation Serif, serif">You
can e-mail me at <b>wkaras@yahoo.com</b> . Entiendo
español si prefiere escribirme en español. Please feel free to
re-host any or all of the material on this page if you so desire. (Do
not remove copyright notices.)</font></p>
<p><font face="Liberation Serif, serif">Photos of my late wife Carmen
with Pope John Paul II : <a href="fotos_papa/p1.gif">first</a> <a href="fotos_papa/p2_com.gif">second</a></font></p>
<h1 class="western">Paintings</h1>
<p><font face="Liberation Serif, serif">Some <a href="pgh/pgh.html">paintings</a>
by my wife's niece, Patricia Galeazzi-Henry.</font></p>
<p><a href="http://www.barryscanlanart.com/">Website</a> with
paintings by my friend from college. 
</p>
<h1 class="western">My Background</h1>
<p><font face="Liberation Serif, serif">I live in the Metro Atlanta,
Georgia area</font> <font face="Liberation Serif, serif">in the
United States. I have a Bachelor's degree in Computer Science and
Math from <a href="http://www.emich.edu/compsci/">Eastern Michigan
University</a> (also the alma mater of <a href="http://askjudgemathis.com/">Judge
Greg Mathis</a>). I have 30+ years of experience as a software
developer, mostly in embedded and low-level software (retired now). I have several
repositories on <a href="https://github.com/wkaras">github</a> and a</font>
<font face="Liberation Serif, serif">blog on <a href="https://waltsgeekblog.quora.com/">Quora</a>
. I am also on <a href="https://www.linkedin.com/in/walter-karas-77b4114">Linkedin</a></font>
<font face="Liberation Serif, serif">. I am on <a href="http://stackoverflow.com/users/2793551/waltk">stackoverflow</a>
and <a href="http://es.stackoverflow.com/users/21164/waltk">stackoverflow
en español</a> .</font></p>
<h1 class="western">C++ Library Bit Fields</h1>
<p>I have written a bit field facility provided by the header file
bitfield.h ( <a href="https://github.com/wkaras/C-plus-plus-library-bit-fields/blob/master/Bitfield.pdf">documentation</a>
<a href="https://github.com/wkaras/C-plus-plus-library-bit-fields">github
repo</a> ). The facility is more portable and flexible than the bit
field facility provided by the base language. Bit field structures
can be laid out from most to least or least to most significant bits,
under programmer control. Bit field structures can be located in
device registers that are not memory mapped. With good compiler
optimization, the performance is comparable.</p>
<h1 class="western">C++(/C/Rust) Memory Ordering</h1>
<p>I wrote up a description that hopefully is equivalent to what’s
in the language standard(s), <a href="CppMemOrder.html">here</a>
.  It’s simultaneously shorter and less vague.  It deals simply
with multithreading issues with ordering memory accesses, as a separate issue from
execution order within individual threads.</p>
<h1 class="western">Heap Memory Manager</h1>
<p><font face="Liberation Serif, serif">A very portable C-language
Heap Memory Manager (Dynamic Memory Allocator). To check it out, the
documentation is</font> <font face="Liberation Serif, serif"><a href="https://github.com/wkaras/heap-memory-manager/blob/master/heapmm.pdf">here</a>,
and the code, as well as a ZIP archive with the code and
documentation, is at <a href="https://github.com/wkaras/heap-memory-manager">https://github.com/wkaras/heap-memory-manager</a>
.</font></p>
<p><font face="Liberation Serif, serif">Here is a web site that
describes a interesting algorithm (<a href="http://www.gii.upv.es/tlsf/">TLSF</a>)
for C-style dynamic memory allocation. This algorithm should be
significantly faster than the one I used. Instead of using best-fit,
this algorithm finds a free block whose size is within 2/31 or 2/63
(tunable) of the size of the requested block. Even best-fit can waste
some memory (because there can be free blocks too small to be useful
to the application). Therefore, the trade-off made by this algorithm
may be desirable. The provided implementation, however, does not seem
to me to be that easy to port.</font></p>
<p><font face="Liberation Serif, serif">One important thing I
neglected to mention/realize is that the audit tests can result in a
read of a bad address, which in some environments will cause an
internal interrupt. If you see this, it's not a reason to be
concerned that heapmm won't work in your environment.</font></p>
<p><font face="Liberation Serif, serif">To reduce memory space
overhead, this allocator uses the memory within free blocks to create
a searchable data structure (an AVL tree) of free blocks. The
potential big trade-off with that is it will result in a lot of
memory accesses with terrible locality. That is, a low ratio of
number of memory accesses to number of memory pages containing the
accessed addresses. This could be a significant problem for an
application that uses a large amount of dynamically allocated memory,
and runs in an environment with insufficient physical memory that it
can run without page faults. Lack of locality can also have an effect
even if memory pages are not paged out to and back from secondary
storage. On higher-end Freescale processors, for example, the Memory
Management Unit (MMU) can be useful even if there is no actual paging
of memory. But the MMU uses a large table in physical memory that
defines the mapping of virtual memory pages to physical memory pages.
The MMU is only able to cache a limitied number of entries in this
table. So an access to a memory page whose translation table entry is
not cached will cause two memory accesses, one to load in the
translation entry, followd by the actual access itself. So this case,
bad locality of memory accesses can have a price even without memory
paging.</font></p>
<p><font face="Liberation Serif, serif">Locality of course also
applies to memory caching. But since cache lines are small (typically
8 to 16 bytes I think), I can’t see a way to design a general
purpose heap memory manager so it’s locality with respect to memory
caching would not be low.</font></p>
<p>This allocator, as is, is obsolete now because it is not
multithread-safe. This could perhaps be used for per-thread memory
polls. If memory was deallocated in a different thread than it was
allocated, it could be put in a linked list associated with the
allocating code. When the allocation function is called in a thread,
it could pop all the blocks that had been put in its associated
linked list, and put them into its memory pool, before doing the
allocation. The head pointers for the free lists would have to be
atomic, and versioned due to the ABA problem. Unfortunately, portable
versioned pointers are not straight-forward: <a href="https://github.com/ywkaras/trafficserver/blob/freelist_upd/include/tscore/ver_ptr.h">ver_ptr.h</a></p>
<h1 class="western">Memory Game</h1>
<p><font face="Liberation Serif, serif">To download a zip file
containing my Memory Game program (created with Visual C++ .NET),
click <a href="memgame.zip">here</a>. To view the source code, click
<a href="memgame_cpp.txt">here</a> .</font></p>
<p><font face="Liberation Serif, serif">The executable is in the
public domain. I wrote this program in order to learn Visual C++
.NET, but it might be of some interest to very young children and
extremely bored people. The borders on the &quot;Play Again&quot; and
&quot;Exit&quot; buttons at the end of the game are not drawn
properly. (If you minimize, then restore the form, the border on the
&quot;Play Again&quot; button changes.) But I think this has to be
Microsoft's bug, not mine. You may also notice that, when the prompt
says you can click &quot;anywhere&quot; to continue, a click on the
text of the prompt is ignored. This is because the prompt is
associated with a Label object. Label is derived from the Control
class, so it receives clicks, even though it does nothing with them.
I decided it wasn't worth the trouble to display the text directly
without using a control, so that a click on the text would not be
ignored.</font></p>
<h1 class="western">AVL Tree Template</h1>
<p><font face="Liberation Serif, serif">I have written a C++ template
that encodes the AVL Tree algorithms in a very flexible way. To check
it out, click <a href="https://github.com/wkaras/C-plus-plus-intrusive-container-templates/blob/master/avl_tree.h">here</a>.
This, plus instrusive singly and doubly linked list and hash table
templates are available (with MIT open source license) <a href="https://github.com/wkaras/C-plus-plus-intrusive-container-templates">here</a>.</font></p>
<p><font face="Liberation Serif, serif">I have also written an
equivalent <a href="gen_c/cavl_tree.html">&quot;generic package&quot;
in straight C</a>. (Or, download a <a href="gen_c/cavl_tree.zip">zip
file</a> with the HTML documentation and source files.) It would be
fairly straightforward to use this generic package to create a
facility in C that would be analogous to the map/set templates in the
C++ Standard Template Library (where items are copied into the
container instead of linked in, and the container allocates memory
from the heap to hold the copies). Used by heap memory manager above
and by <a href="https://github.com/Stichting-MINIX-Research-Foundation/minix/blob/4db99f4012570a577414fe2a43697b2f239b699e/minix/servers/vm/cavl_if.h">Minix</a>
.</font></p>
<p><font face="Liberation Serif, serif">The AVL Tree implementations
are</font> <font face="Liberation Serif, serif">dedicated to the
<a href="http://creativecommons.org/licenses/publicdomain/">Public
Domain</a>. (I can provide it under an MIT license if need be.)</font></p>
<h1 class="western">CUI Chess</h1>
<p><font face="Liberation Serif, serif">Here is a chess program that
I wrote for MS-DOS back in the mid 90s:</font></p>
<p><font face="Liberation Serif, serif"><a href="chess.txt">description</a>
<a href="chessexe.zip">zip file with MS-DOS executable</a> <a href="chesssrc.zip">zip
file with MS-DOS source code</a> <a href="https://github.com/wkaras/xterm-CUI-Chess">port
to UNIX xterm</a></font></p>
<p><font face="Liberation Serif, serif">This program acts really
stupid in end-games when it has two pieces and the opponent only has
their king.</font></p>
<p><font face="Liberation Serif, serif">I have not managed to beat
the program (with any reasonable look-ahead enabled). But I am a
lousy chess player. For those who have beaten it, I’d love it if
you sent me the move sequence and what command line parameters you
used at startup. Let me know if I can make public the move sequence
and/or your name.</font></p>
<h1 class="western">Portable Spinlock Code in C</h1>
<p><font face="Liberation Serif, serif">Here is the <a href="spinlock_h.txt">header
file</a> and the <a href="spinlock_c.txt">implementation file</a> .
This code is untested, so if you find problems with it, let me know.
Peterson's Algorithm is a simpler, 2-way mutual exclusion algorithm.
<a href="https://lamport.azurewebsites.net/pubs/bakery.pdf">Lamport's
Bakery Algorithm</a> , published back in the 70s, is a slightly more
complex n-way mutual exclusion algorithm, which has some useful
properties that my algorithm does not.&nbsp; Unlike mine, Lamport's
algorithm is &quot;fair&quot; in that processors get the mutex in the
order that they requested it. On the other hand, if the processors
are unavoidably contending that much for the same shared resource,
you may be wasting your money paying for multiple processors. To
observe a very minor point, adapting Lamport's algorithm to handle
ticket number wrap-around (due to precision limits) would I think
have to involve giving &quot;cuts&quot; in the line. (The more
fairness matters, the more likely it is ticket number wrap-around
will happen.) I believe that Lamport found in later investigation
that his algorithm works even if overlapping memory accesses of any
single memory location by multiple processors caused one or both
accesses to fail (not just be arbitrarily ordered). This is not the
case with my algorithm.</font></p>
<p><font face="Liberation Serif, serif">This code is obsolete now. 
It would need to have memory fences and atomic access added to work
with multicore processors.</font></p>
<p><font face="Liberation Serif, serif">WARNING: I think I may have
developed this code and algorithm while I was in the employ of
Alcatel (now part of Nokia), so Nokia could potentially claim it as
its intellectual property. If you want to avoid this issue, and need
a multi-way spinlock, use Lamport’s Algorithm. Another alternative
for a multi-way spinlock is a well-know technique using a “binary
tree” of Peterson 2-way locks, but (like my algorithm) it lacks the
fairness of Lamport’s Algorithm. If anyone really cares, I could
try to get it clarified whether Nokia feels any burning
desire to assert rights over this.</font></p>
<h1 class="western">&quot;Item List&quot; Programming Technique</h1>
<p><font face="Liberation Serif, serif">Click <a href="itemlist/itemlist.html">here</a>
to see some example code.</font></p>
<h1 class="western">Odds and Ends</h1>
<p><font face="Liberation Serif, serif">Thoughts on <a href="Cpp_overhead.html">C++
versus C</a></font></p>
<p><font face="Liberation Serif, serif">This stuff's in the public
domain:</font></p>
<p><font face="Liberation Serif, serif"><a href="hex_to_dec.html">Convert
hex numbers to decimal...</a> </font>
</p>
<p><font face="Liberation Serif, serif"><a href="matrix_mult.html">Matrix
multiplication...</a> </font>
</p>
<h1 class="western">Delaware Sucks</h1>
<p><font face="Liberation Serif, serif">Don't go to Delaware if you
can help it: <a href="https://www.facebook.com/ABadVacationInDelaware/about/?tab=page_info">Shakedown
by the Delaware State Police</a> .</font></p>
<h1 class="western">How to Store Christmas Lights</h1>
<p><font face="Liberation Serif, serif">Save some sturdy cardboard
tubes, such as those that are left when rolls of wrapping paper are
used up. Wind the lights in a spiral around a tube, without
overlapping, and secure the ends with masking tape. From a plastic
bottle, cut a piece of plastic that will cover the end of the
cardboard tube with lots of overlap. Cut a length of strong twine
that is about twice the length of the cardboard tube. Make a whole in
the center of the piece of plastic that is just big enough to thread
the twine through. Thread one end of the twine through the hole, then
make a knot at the end of twine. The knot must be too large to pass
through the hole in the plastic. Pass the other end of the twine
through the cardboard tube. Tie a loop in the (unknotted) end of the
twine. You can now hang the tube with the lights in a convenient
storage place by putting the loop over a nail or peg.</font></p>
<h1 class="western">Links</h1>
<p><a href="https://en.cppreference.com/w/"><font face="Liberation Serif, serif">C++
Reference</font></a></p>
<p><a href="cppvaluetype.png"><font face="Liberation Serif, serif">C++
Value types</font></a></p>
<p><font face="Liberation Serif, serif"><a href="http://www.boost.org/">Boost
C++ Libraries...</a> </font>
</p>
<p><font face="Liberation Serif, serif"><a href="http://www.codeproject.com/">The
Code Project...</a> </font>
</p>
<p><font face="Liberation Serif, serif"><a href="http://wordreference.com/">Translate
between English and other major European languages...</a> </font>
</p>
<p><font face="Liberation Serif, serif"><a href="http://www.vim.org/">vi
for Windows PCs...</a> Please DON'T e-mail me to tell me about all
the wonderful editors I could use instead. Vi burns out the
good-editor pleasure centers in the brains of its long-term users, so
there is no point in us switching editors now.</font></p>
<p><font face="Liberation Serif, serif">C++ source code <a href="http://www.semdesigns.com/Products/Obfuscators/CppObfuscationExample.html">obfuscator...</a>
(shrouder)</font></p>
<p><font face="Liberation Serif, serif"><a href="http://www.cantrip.org/emptyopt.html">The
&quot;Empty Member&quot; C++ Optimization...</a> (My C++ AVL tree
template uses this.)</font></p>
<h2 class="western">Gwinnett County, GA Area Links</h2>
<p><a href="https://redgingertogo.com/">Red Ginger Chinese / Japanese
(Sushi) / Thai Restaurant</a></p>
<h2 class="western">Chambana, IL Area Links</h2>
<p><a href="https://www.facebook.com/pages/Average-Joe-Auto-Repair/111079525622415">Average
Joe's Auto Repair</a></p>
<h2 class="western">Raleigh, NC Area Links</h2>
<p align="left" style="margin-bottom: 0.08in"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><a href="https://www.facebook.com/TheDefinery/?fref=ts">Jordyn
the MUA</a> (make-up artist)</font></font></p>
<p align="left" style="margin-bottom: 0.08in"><a href="http://www.swiftcreekexterminating.com/"><font face="Liberation Serif, serif">Swift
Creek Exterminating</font></a></p>
<p align="left" style="margin-bottom: 0.08in"><a href="http://fosterscollision.com/"><font face="Liberation Serif, serif">Foster's
Auto Body</font></a></p>
<p align="left" style="margin-bottom: 0.08in"><a href="http://www.vicsitalianrestaurant.com/#welcometovics"><font face="Liberation Serif, serif">Vic's
Italian Restaurant and Pizzeria</font></a></p>
<p align="left" style="margin-bottom: 0.08in"><a href="http://www.torerosmexicanrestaurants.com/locations/raleigh">Torero's</a>
(Mexican restaurant)</p>
</body>
</html>
